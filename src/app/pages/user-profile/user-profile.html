<div class="profile-wrapper">
  <div class="profile-header-section">
    <button class="btn-back" (click)="goBack()">Back</button>
    <h1 class="page-title">User Profile</h1>
  </div>

  <div class="profile-container">
    <!-- Header/Background Section -->
    <div class="profile-header" [style.background-image]="backgroundImage">
      <div class="profile-picture">
        {{ profilePicture }}
      </div>
      <h1 class="community-name">{{ displayCommunityName }}</h1>
    </div>

    <!-- Main Content -->
    <div class="profile-content">
      <!-- User Info Section (Center) -->
      <div class="user-info">
        <h2 class="section-subtitle">Account Details</h2>
        <div class="info-item">
          <label>Username</label>
          <div class="info-content">
            <span *ngIf="!editingUsername">{{ userName || 'Not set' }}</span>
            <input *ngIf="editingUsername" [(ngModel)]="tempUsername" type="text" placeholder="Enter username" />
          </div>
          <div class="info-actions">
            <button class="btn-edit" *ngIf="!editingUsername" (click)="startEdit('Username')">Edit</button>
            <button class="btn-save" *ngIf="editingUsername" (click)="saveEdit('Username')">Save</button>
            <button class="btn-cancel" *ngIf="editingUsername" (click)="cancelEdit('Username')">Cancel</button>
          </div>
        </div>

        <div class="info-item">
          <label>Email</label>
          <div class="info-content">
            <span *ngIf="!editingEmail">{{ userEmail || 'Not set' }}</span>
            <input *ngIf="editingEmail" [(ngModel)]="tempEmail" type="email" placeholder="Enter email" />
          </div>
          <div class="info-actions">
            <button class="btn-edit" *ngIf="!editingEmail" (click)="startEdit('Email')">Edit</button>
            <button class="btn-save" *ngIf="editingEmail" (click)="saveEdit('Email')">Save</button>
            <button class="btn-cancel" *ngIf="editingEmail" (click)="cancelEdit('Email')">Cancel</button>
          </div>
        </div>

        <div class="info-item">
          <label>Community</label>
          <div class="info-content">
            <span *ngIf="!editingCommunity">{{ displayCommunityName }}</span>
            <input *ngIf="editingCommunity" [(ngModel)]="tempCommunity" type="text" placeholder="Enter community" />
          </div>
          <div class="info-actions">
            <button class="btn-edit" *ngIf="!editingCommunity" (click)="startEdit('Community')">Edit</button>
            <button class="btn-save" *ngIf="editingCommunity" (click)="saveEdit('Community')">Save</button>
            <button class="btn-cancel" *ngIf="editingCommunity" (click)="cancelEdit('Community')">Cancel</button>
          </div>
        </div>

        <div class="info-item password-item">
          <label>Password</label>
          <div class="info-content">
            <span *ngIf="!editingPassword">{{ userPassword }}</span>
            <input *ngIf="editingPassword" [(ngModel)]="tempPassword" type="password"
              placeholder="Enter new password" />
          </div>
          <div class="info-actions">
            <button class="btn-edit" *ngIf="!editingPassword" (click)="startEdit('Password')">Edit</button>
            <button class="btn-save" *ngIf="editingPassword" (click)="saveEdit('Password')">Save</button>
            <button class="btn-cancel" *ngIf="editingPassword" (click)="cancelEdit('Password')">Cancel</button>
          </div>
        </div>

        <button class="logout-btn" (click)="logout()">Logout</button>
      </div>

      <!-- Right Sidebar -->
      <div class="right-sidebar">
        <div class="sidebar-group">
          <a href="#" (click)="$event.preventDefault(); navigateToHistory()" class="main-link history-link">
            <span class="icon">ðŸ“œ</span> History
          </a>
        </div>
      </div>
    </div>

    <!-- Bottom Section -->
    <div class="bottom-section">
      <div class="stats-item">
        <h3>Number of Likes</h3>
        <p>{{ userLikes.length }}</p>
      </div>
      <div class="stats-item">
        <h3>Number of Comments</h3>
        <p>{{ userComments.length }}</p>
      </div>
      <div class="stats-item">
        <h3>Number of Posts</h3>
        <p>{{ userPosts.length }}</p>
      </div>
    </div>
  </div>
</div>